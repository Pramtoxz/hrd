import{c as V,r as I,j as t,L,a as _,H as Y}from"./app-Dhj2yppL.js";import{B as u}from"./createLucideIcon-Kw67UNnC.js";import{b as z,e as c,a as J,c as o,T as O,d as X}from"./table-9iyMN1hn.js";import{B as E}from"./badge-CvSqxxlB.js";import{I as Q}from"./input-Dett9do5.js";import{a as U,b as W,c as Z,d as H,S as ee}from"./select-CY3L5dZW.js";import{c as te,d as ae,a as se,T as le,P as re,S as ie,A as ne,t as $,C as ce,b as oe}from"./app-layout-BqFvHWxQ.js";import{S as P}from"./sweetalert2.esm.all-NNS-RXd7.js";/* empty css            */import"./index-DcQpb1uV.js";import"./malogo-DItZi9W1.js";import"./index-CbYu10RE.js";import"./index-BWeyt2vI.js";import"./index-CMWG4mbA.js";import"./users-Csf4-srX.js";import"./loader-circle-BwylV5Sz.js";import"./minus-ByxClWfV.js";const ue=[{title:"Dashboard",href:"/dashboard"},{title:"Release",href:"/release"}];function Ie(l){const e=V.c(42),{releases:a,filters:d,isAdmin:n}=l,[r,M]=I.useState(d.search||""),[i,q]=I.useState(d.status||"all");let v,S;e[0]!==r||e[1]!==i?(v=()=>{if(!r&&i==="all")return;const s=setTimeout(()=>{_.get("/release",{search:r||void 0,status:i==="all"?void 0:i},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},S=[r,i],e[0]=r,e[1]=i,e[2]=v,e[3]=S):(v=e[2],S=e[3]),I.useEffect(v,S);const F=xe,G=me;let N;e[4]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(Y,{title:"Release"}),e[4]=N):N=e[4];let C;e[5]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("h1",{className:"text-2xl font-bold",children:"Release"}),e[5]=C):C=e[5];const D=!n&&"(Milik Anda)";let m;e[6]!==a.total||e[7]!==D?(m=t.jsxs("div",{children:[C,t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",a.total," release ",D]})]}),e[6]=a.total,e[7]=D,e[8]=m):m=e[8];let k;e[9]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(u,{asChild:!0,children:t.jsxs(L,{href:"/release/create",children:[t.jsx(re,{className:"h-4 w-4"}),"Tambah Release"]})}),e[9]=k):k=e[9];let h;e[10]!==m?(h=t.jsxs("div",{className:"flex items-center justify-between",children:[m,k]}),e[10]=m,e[11]=h):h=e[11];let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(ie,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[12]=w):w=e[12];let T;e[13]===Symbol.for("react.memo_cache_sentinel")?(T=s=>M(s.target.value),e[13]=T):T=e[13];let x;e[14]!==r?(x=t.jsxs("div",{className:"relative flex-1 max-w-sm",children:[w,t.jsx(Q,{placeholder:"Cari judul atau isi berita...",value:r,onChange:T,className:"pl-9"})]}),e[14]=r,e[15]=x):x=e[15];let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(U,{className:"w-[180px]",children:t.jsx(W,{placeholder:"Filter Status"})}),e[16]=y):y=e[16];let B;e[17]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsxs(Z,{children:[t.jsx(H,{value:"all",children:"Semua Status"}),t.jsx(H,{value:"true",children:"Aktif"}),t.jsx(H,{value:"false",children:"Tidak Aktif"})]}),e[17]=B):B=e[17];let f;e[18]!==i?(f=t.jsxs(ee,{value:i,onValueChange:q,children:[y,B]}),e[18]=i,e[19]=f):f=e[19];let p;e[20]!==x||e[21]!==f?(p=t.jsxs("div",{className:"flex items-center gap-2",children:[x,f]}),e[20]=x,e[21]=f,e[22]=p):p=e[22];let A;e[23]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(J,{children:t.jsxs(z,{children:[t.jsx(o,{className:"w-16",children:"No"}),t.jsx(o,{children:"Judul"}),t.jsx(o,{children:"Tanggal Publikasi"}),t.jsx(o,{children:"Sumber Press Release"}),t.jsx(o,{children:"Dibuat Oleh"}),t.jsx(o,{children:"Status"}),t.jsx(o,{className:"text-right",children:"Aksi"})]})}),e[23]=A):A=e[23];let j;e[24]!==n||e[25]!==a.current_page||e[26]!==a.data||e[27]!==a.per_page?(j=a.data.length>0?a.data.map((s,K)=>t.jsxs(z,{children:[t.jsx(c,{className:"font-medium",children:(a.current_page-1)*a.per_page+K+1}),t.jsxs(c,{className:"font-medium max-w-xs",children:[t.jsx("div",{className:"truncate",children:s.judul}),t.jsxs("div",{className:"text-xs text-muted-foreground truncate mt-1",children:[s.isi_berita.substring(0,100),"..."]})]}),t.jsx(c,{children:new Date(s.tanggal_publikasi).toLocaleDateString("id-ID")}),t.jsx(c,{children:s.press_release?t.jsx(E,{variant:"outline",children:s.press_release.what}):t.jsx("span",{className:"text-muted-foreground text-sm",children:"Manual"})}),t.jsx(c,{children:s.user.name}),t.jsx(c,{children:s.status?t.jsx(E,{variant:"default",children:"Aktif"}):t.jsx(E,{variant:"secondary",children:"Tidak Aktif"})}),t.jsx(c,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[n&&t.jsx(u,{variant:s.status?"outline":"default",size:"sm",onClick:()=>G(s.id,s.status,s.judul),title:s.status?"Nonaktifkan":"Aktifkan",className:s.status?"text-red-600 hover:text-red-700 hover:bg-red-50":"bg-green-600 hover:bg-green-700",children:s.status?t.jsx(te,{className:"h-4 w-4"}):t.jsx(ae,{className:"h-4 w-4"})}),t.jsx(u,{variant:"outline",size:"sm",asChild:!0,children:t.jsx(L,{href:`/release/${s.id}/edit`,children:t.jsx(se,{className:"h-4 w-4"})})}),t.jsx(u,{variant:"destructive",size:"sm",onClick:()=>F(s.id,s.judul),children:t.jsx(le,{className:"h-4 w-4"})})]})})]},s.id)):t.jsx(z,{children:t.jsx(c,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"Tidak ada data release"})}),e[24]=n,e[25]=a.current_page,e[26]=a.data,e[27]=a.per_page,e[28]=j):j=e[28];let g;e[29]!==j?(g=t.jsx("div",{className:"rounded-lg border",children:t.jsxs(O,{children:[A,t.jsx(X,{children:j})]})}),e[29]=j,e[30]=g):g=e[30];let b;e[31]!==a.current_page||e[32]!==a.last_page||e[33]!==a.links||e[34]!==a.per_page||e[35]!==a.total?(b=a.last_page>1&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Menampilkan ",(a.current_page-1)*a.per_page+1," - ",Math.min(a.current_page*a.per_page,a.total)," dari ",a.total," data"]}),t.jsx("div",{className:"flex gap-1",children:a.links.map(de)})]}),e[31]=a.current_page,e[32]=a.last_page,e[33]=a.links,e[34]=a.per_page,e[35]=a.total,e[36]=b):b=e[36];let R;return e[37]!==p||e[38]!==g||e[39]!==b||e[40]!==h?(R=t.jsxs(ne,{breadcrumbs:ue,children:[N,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:[h,p,g,b]})]}),e[37]=p,e[38]=g,e[39]=b,e[40]=h,e[41]=R):R=e[41],R}function de(l,e){return l.label==="&laquo; Previous"?t.jsx(u,{variant:"outline",size:"sm",disabled:!l.url,onClick:()=>l.url&&_.get(l.url,{},{preserveState:!0,preserveScroll:!0}),children:t.jsx(ce,{className:"h-4 w-4"})},e):l.label==="Next &raquo;"?t.jsx(u,{variant:"outline",size:"sm",disabled:!l.url,onClick:()=>l.url&&_.get(l.url,{},{preserveState:!0,preserveScroll:!0}),children:t.jsx(oe,{className:"h-4 w-4"})},e):t.jsx(u,{variant:l.active?"default":"outline",size:"sm",disabled:!l.url,onClick:()=>l.url&&_.get(l.url,{},{preserveState:!0,preserveScroll:!0}),children:l.label},e)}async function me(l,e,a){const d=!e,n=d?"Aktifkan":"Nonaktifkan";(await P.fire({title:`Konfirmasi ${n}`,text:`Apakah Anda yakin ingin ${n.toLowerCase()} Release Ini?`,icon:"question",showCancelButton:!0,confirmButtonColor:d?"#10b981":"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:`Ya, ${n}!`,cancelButtonText:"Batal"})).isConfirmed&&_.patch(`/release/${l}/toggle-status`,{},{onSuccess:()=>{$.success(`Release berhasil ${d?"diaktifkan":"dinonaktifkan"}`)},onError:he})}function he(){$.error("Gagal mengubah status release")}async function xe(l,e){(await P.fire({title:"Konfirmasi Hapus",text:"Apakah Anda yakin ingin menghapus release Ini?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal"})).isConfirmed&&_.delete(`/release/${l}`,{onSuccess:pe,onError:fe})}function fe(){$.error("Gagal menghapus release")}function pe(){$.success("Release berhasil dihapus")}export{Ie as default};
