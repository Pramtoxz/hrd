import{c as be,u as je,U as ue,j as t,H as _e}from"./app-Dhj2yppL.js";import{B as V}from"./createLucideIcon-Kw67UNnC.js";import{I as de}from"./input-Dett9do5.js";import{L as R}from"./label-S3sKSwZl.js";import{T as ve}from"./textarea-Eh8_EXxn.js";import{C as Ne}from"./checkbox-DlJHlXLV.js";import{X as me,A as ke,t as fe}from"./app-layout-BqFvHWxQ.js";import{S as ye}from"./sweetalert2.esm.all-NNS-RXd7.js";/* empty css            */import"./index-DcQpb1uV.js";import"./malogo-DItZi9W1.js";import"./index-CbYu10RE.js";import"./index-BWeyt2vI.js";import"./index-CMWG4mbA.js";import"./users-Csf4-srX.js";import"./loader-circle-BwylV5Sz.js";import"./minus-ByxClWfV.js";const Se=[{title:"Dashboard",href:"/dashboard"},{title:"Release",href:"/release"},{title:"Edit Release",href:"#"}];function Oe(D){const e=be.c(87),{release:i,isAdmin:W}=D,pe=Be,Z=i.judul||"",ee=i.isi_berita||"";let u;e[0]!==i.tanggal_publikasi?(u=pe(i.tanggal_publikasi)||"",e[0]=i.tanggal_publikasi,e[1]=u):u=e[1];const te=i.status||!1;let T;e[2]!==Z||e[3]!==ee||e[4]!==u||e[5]!==te?(T={judul:Z,isi_berita:ee,tanggal_publikasi:u,status:te,foto1:null,foto2:null,foto3:null,foto4:null,foto5:null,_method:"PUT"},e[2]=Z,e[3]=ee,e[4]=u,e[5]=te,e[6]=T):T=e[6];const{data:r,setData:s,post:se,processing:le,errors:o}=je(T);let E;e[7]===Symbol.for("react.memo_cache_sentinel")?(E={},e[7]=E):E=e[7];const[ae,ie]=ue.useState(E);let U;e[8]===Symbol.for("react.memo_cache_sentinel")?(U=[],e[8]=U):U=e[8];const[m,he]=ue.useState(U);let $;e[9]!==i.fotos?.[0]?($=i.fotos?.[0]||{},e[9]=i.fotos?.[0],e[10]=$):$=e[10];const re=$;let A;e[11]!==s?(A=(l,a)=>{const n=l.target.files?.[0]||null;if(s(a,n),n){const c=new FileReader;c.onloadend=()=>{ie(d=>({...d,[a]:c.result}))},c.readAsDataURL(n)}else ie(c=>{const d={...c};return delete d[a],d})},e[11]=s,e[12]=A):A=e[12];const oe=A;let I;e[13]!==s?(I=l=>{s(l,null),ie(a=>{const n={...a};return delete n[l],n})},e[13]=s,e[14]=I):I=e[14];const ne=I;let q;e[15]===Symbol.for("react.memo_cache_sentinel")?(q=l=>{he(a=>[...a,l])},e[15]=q):q=e[15];const xe=q;let L;e[16]!==m||e[17]!==se||e[18]!==i.id||e[19]!==s?(L=async l=>{l.preventDefault(),(await ye.fire({title:"Konfirmasi Update",text:"Apakah Anda yakin ingin mengupdate release ini?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3b82f6",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Update!",cancelButtonText:"Batal"})).isConfirmed&&(s("deleted_photos",m),setTimeout(()=>{se(`/release/${i.id}`,{forceFormData:!0,onSuccess:Ce,onError:Fe})},100))},e[16]=m,e[17]=se,e[18]=i.id,e[19]=s,e[20]=L):L=e[20];const ce=L;let M;e[21]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(_e,{title:"Edit Release"}),e[21]=M):M=e[21];let G;e[22]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx("h1",{className:"text-2xl font-bold",children:"Edit Release"}),e[22]=G):G=e[22];let f;e[23]!==i.press_release?(f=i.press_release&&t.jsx("div",{className:"p-4 bg-muted rounded-lg",children:t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sumber: ",t.jsx("span",{className:"font-medium text-foreground",children:i.press_release.what})]})}),e[23]=i.press_release,e[24]=f):f=e[24];let z;e[25]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(R,{htmlFor:"judul",children:"Judul *"}),e[25]=z):z=e[25];let p;e[26]!==s?(p=l=>s("judul",l.target.value),e[26]=s,e[27]=p):p=e[27];let h;e[28]!==r.judul||e[29]!==p?(h=t.jsx(de,{id:"judul",value:r.judul,onChange:p,placeholder:"Masukkan judul release",required:!0}),e[28]=r.judul,e[29]=p,e[30]=h):h=e[30];let x;e[31]!==o.judul?(x=o.judul&&t.jsx("p",{className:"text-sm text-red-500",children:o.judul}),e[31]=o.judul,e[32]=x):x=e[32];let g;e[33]!==h||e[34]!==x?(g=t.jsxs("div",{className:"space-y-2",children:[z,h,x]}),e[33]=h,e[34]=x,e[35]=g):g=e[35];let H;e[36]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(R,{htmlFor:"isi_berita",children:"Isi Berita *"}),e[36]=H):H=e[36];let b;e[37]!==s?(b=l=>s("isi_berita",l.target.value),e[37]=s,e[38]=b):b=e[38];let j;e[39]!==r.isi_berita||e[40]!==b?(j=t.jsx(ve,{id:"isi_berita",value:r.isi_berita,onChange:b,placeholder:"Tulis isi berita lengkap",rows:20,className:"min-h-[400px]",required:!0}),e[39]=r.isi_berita,e[40]=b,e[41]=j):j=e[41];let _;e[42]!==o.isi_berita?(_=o.isi_berita&&t.jsx("p",{className:"text-sm text-red-500",children:o.isi_berita}),e[42]=o.isi_berita,e[43]=_):_=e[43];let v;e[44]!==j||e[45]!==_?(v=t.jsxs("div",{className:"space-y-2",children:[H,j,_]}),e[44]=j,e[45]=_,e[46]=v):v=e[46];let J;e[47]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(R,{htmlFor:"tanggal_publikasi",children:"Tanggal Publikasi *"}),e[47]=J):J=e[47];let N;e[48]!==s?(N=l=>s("tanggal_publikasi",l.target.value),e[48]=s,e[49]=N):N=e[49];let k;e[50]!==r.tanggal_publikasi||e[51]!==N?(k=t.jsx(de,{id:"tanggal_publikasi",type:"date",value:r.tanggal_publikasi,onChange:N,required:!0}),e[50]=r.tanggal_publikasi,e[51]=N,e[52]=k):k=e[52];let y;e[53]!==o.tanggal_publikasi?(y=o.tanggal_publikasi&&t.jsx("p",{className:"text-sm text-red-500",children:o.tanggal_publikasi}),e[53]=o.tanggal_publikasi,e[54]=y):y=e[54];let S;e[55]!==k||e[56]!==y?(S=t.jsxs("div",{className:"space-y-2",children:[J,k,y]}),e[55]=k,e[56]=y,e[57]=S):S=e[57];let w;e[58]!==r.status||e[59]!==W||e[60]!==s?(w=W&&t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ne,{id:"status",checked:r.status,onCheckedChange:l=>s("status",l)}),t.jsx(R,{htmlFor:"status",className:"cursor-pointer",children:"Setujui Release"})]}),e[58]=r.status,e[59]=W,e[60]=s,e[61]=w):w=e[61];let K;e[62]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(R,{children:"Foto (Maksimal 5)"}),e[62]=K):K=e[62];let O;e[63]===Symbol.for("react.memo_cache_sentinel")?(O=[1,2,3,4,5],e[63]=O):O=e[63];let F;e[64]!==m||e[65]!==re||e[66]!==oe||e[67]!==ae||e[68]!==ne?(F=t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:O.map(l=>{const a=`foto${l}`,n=re[a],c=ae[a],d=m.includes(a);return t.jsx("div",{className:"space-y-2",children:c?t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:c,alt:`Foto ${l}`,className:"h-32 w-full object-cover rounded-lg border"}),t.jsx(V,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1",onClick:()=>ne(a),children:t.jsx(me,{className:"h-3 w-3"})})]}):n&&!d?t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:`/assets/images/release/${n}`,alt:`Foto ${l}`,className:"h-32 w-full object-cover rounded-lg border"}),t.jsx(V,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1",onClick:()=>xe(a),children:t.jsx(me,{className:"h-3 w-3"})})]}):t.jsx("div",{className:"h-32 border-2 border-dashed rounded-lg flex items-center justify-center",children:t.jsxs("label",{htmlFor:a,className:"cursor-pointer text-center p-2",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:d?"Upload Foto Baru":`Foto ${l}`}),t.jsx(de,{id:a,type:"file",accept:"image/*",onChange:ge=>oe(ge,a),className:"hidden"})]})})},a)})}),e[64]=m,e[65]=re,e[66]=oe,e[67]=ae,e[68]=ne,e[69]=F):F=e[69];let X;e[70]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: JPG, PNG. Maksimal 2MB per foto. Upload foto baru untuk mengganti foto lama."}),e[70]=X):X=e[70];let C;e[71]!==F?(C=t.jsxs("div",{className:"space-y-4",children:[K,F,X]}),e[71]=F,e[72]=C):C=e[72];let B;e[73]!==le?(B=t.jsx(V,{type:"submit",disabled:le,children:"Update"}),e[73]=le,e[74]=B):B=e[74];let Y;e[75]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(V,{type:"button",variant:"outline",onClick:we,children:"Batal"}),e[75]=Y):Y=e[75];let P;e[76]!==B?(P=t.jsxs("div",{className:"flex gap-2",children:[B,Y]}),e[76]=B,e[77]=P):P=e[77];let Q;return e[78]!==ce||e[79]!==f||e[80]!==g||e[81]!==v||e[82]!==S||e[83]!==w||e[84]!==C||e[85]!==P?(Q=t.jsxs(ke,{breadcrumbs:Se,children:[M,t.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:[G,t.jsx("div",{className:"max-w-4xl rounded-lg border p-6",children:t.jsxs("form",{onSubmit:ce,className:"space-y-6",children:[f,g,v,S,w,C,P]})})]})]}),e[78]=ce,e[79]=f,e[80]=g,e[81]=v,e[82]=S,e[83]=w,e[84]=C,e[85]=P,e[86]=Q):Q=e[86],Q}function we(){return window.history.back()}function Fe(){fe.error("Gagal mengupdate release")}function Ce(){fe.success("Release berhasil diupdate")}function Be(D){return D?new Date(D).toISOString().split("T")[0]:""}export{Oe as default};
